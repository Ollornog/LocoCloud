---
# inventories/kunde-{{ kunde_id }}/hosts.yml
# Generated by: scripts/new-customer.sh
# Variante: {{ variante }}

all:
  children:
{% if variante in ['hybrid', 'lokal_only'] %}
    proxmox:
      hosts:
        {{ kunde_id }}-proxmox:
          ansible_host: "{{ '{{ vault_proxmox_netbird_ip }}' }}"
          ansible_user: root
          server_role: proxmox
          is_lxc: false
          proxmox_node: "pve"
          proxmox_api_host: "{{ '{{ vault_proxmox_netbird_ip }}' }}"
          proxmox_api_token_id: "ansible@pam!loco"
          proxmox_api_token_secret: "{{ '{{ vault_proxmox_token }}' }}"
          lxc_template: "local:vztmpl/debian-13-standard_13.0-1_amd64.tar.zst"
{% endif %}
{% if variante in ['cloud_only', 'hybrid'] %}
    online:
      hosts:
        {{ kunde_id }}-hetzner:
          ansible_host: "{{ '{{ vault_hetzner_netbird_ip }}' }}"
          ansible_user: srvadmin
          server_role: online
          public_ip: ""  # Hetzner public IP
          is_lxc: false
{% endif %}
{% if variante == 'lokal_only' %}
    gateway:
      hosts:
        {{ kunde_id }}-gw:
          ansible_host: "{{ '{{ vault_gateway_netbird_ip }}' }}"
          ansible_user: srvadmin
          server_role: gateway
          is_lxc: true
{% endif %}
{% if variante in ['hybrid', 'lokal_only'] %}
    lokal:
      hosts:
        {{ kunde_id }}-apps:
          ansible_host: "{{ '{{ vault_apps_netbird_ip }}' }}"
          ansible_user: srvadmin
          server_role: apps
          is_lxc: true
{% endif %}
