---
# roles/caddy/handlers/main.yml
# ALWAYS restart, NEVER reload (inode issue with bind-mounts)

- name: restart caddy
  ansible.builtin.command: docker restart caddy
  register: caddy_restart_result
  failed_when:
    - caddy_restart_result.rc != 0
    - "'No such container' not in caddy_restart_result.stderr"
  changed_when: caddy_restart_result.rc == 0
