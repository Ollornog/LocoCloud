# ============================================
# GENERIERT DURCH ANSIBLE â€” NICHT MANUELL EDITIEREN
# PocketID OIDC Provider
# Generiert: {{ ansible_facts.date_time.iso8601 }}
# ============================================

services:
  pocketid:
    image: {{ pocketid_image }}
    container_name: pocketid
    restart: unless-stopped
    ports:
      - "127.0.0.1:{{ pocketid_port }}:{{ pocketid_port }}"
    volumes:
      - {{ pocketid_data_path }}:/app/data
    environment:
      - TRUST_PROXY=true
      - APP_URL=https://{{ pocketid_domain }}
      - PORT={{ pocketid_port }}
      - ENCRYPTION_KEY={{ pocketid_encryption_key }}
      - EMAILS_VERIFIED=true
      - ALLOW_USER_SIGNUPS=disabled
      - UI_CONFIG_DISABLED=true
{% if pocketid_api_token | length > 0 %}
      - STATIC_API_KEY={{ pocketid_api_token }}
{% endif %}
