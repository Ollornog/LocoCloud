# ============================================
# GENERIERT DURCH ANSIBLE â€” NICHT MANUELL EDITIEREN
# Vaultwarden
# Generiert: {{ ansible_facts.date_time.iso8601 }}
# ============================================

services:
  vaultwarden:
    image: {{ vaultwarden_image }}
    container_name: vaultwarden
    restart: unless-stopped
    ports:
      - "{{ '127.0.0.1' if 'gateway' in server_roles or 'master' in server_roles else '0.0.0.0' }}:{{ vaultwarden_port }}:80"
    volumes:
      - {{ vaultwarden_data_path }}:/data
    env_file:
      - .env
{% if caddy_mode | default('') != 'master' %}
    labels:
      - "com.centurylinklabs.watchtower.enable=true"
{% endif %}
